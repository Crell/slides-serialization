<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<title>Serializing PHP</title>

  <link rel="stylesheet" href="dist/reset.css">
  <link rel="stylesheet" href="dist/reveal.css">
  <!--  <link rel="stylesheet" href="dist/theme/black.css" id="theme">-->

  <link rel="stylesheet" href="platform/platformsh.css" id="theme" />

  <!-- Theme used for syntax highlighted code -->
  <link rel="stylesheet" href="plugin/highlight/monokai.css" id="highlight-theme">

  <style>

  </style>

</head>
<body class="skin-blue">
<div class="reveal">
  <footer>
    <img src="assets/typo3-logo.svg" alt="TYPO3" data-credit="https://en.wikipedia.org/wiki/File:Logo_TYPO3.svg" />
    <span class="name">@Crell@phpc.social</span>
  </footer>
	<div class="slides">
    <section class="title">
      <h1>Serializing PHP</h1>
    </section>

    <section id="presenter">
      <h2>Larry Garfield</h2>
      <h2><a href="https://phpc.social/@Crell">@Crell@phpc.social</a></h2>

      <div class="layout-col vcentered">
        <a href="http://bit.ly/php80"><img src="assets/exploring-php80.png" width="175px;" alt="Cover of Exploring PHP 8.0" /></a>
        <a href="https://bit.ly/fn-php"><img src="assets/thinking-functionally.png" width="175px;" alt="Cover of Thinking Functionally in PHP" /></a>

        <ul style="text-wrap: none">
          <li style="margin-top: 1em;">Staff Engineer for <a href="https://www.typo3.com/">LegalZoom</a></li>
          <li style="margin-top: 1em;">PHP-FIG Core Committee</li>
          <li style="margin-top: 1em;">General purpose pedant</li>
          <li style="margin-top: 1em;"><a href="http://bit.ly/php80"><em>Exploring PHP 8.0</em></a></li>
          <li style="margin-top: 1em;"><a href="https://bit.ly/fn-php"><em>Thinking Functionally in PHP</em></a></li>
        </ul>
      </div>
    </section>

    <section>

    </section>

    <div style="display: none">
      * What is serialization?
        * Putting cornflakes in milk.  (Photo)
        * Definition: make a sequence, in a line.
        * Definition from Wikipedia.
      * Plethora of potential PHP processes
      * Built-ins
        * Mention old stuff, Serializable and __wakeup()
        * __serialize/__unserialize
        * var_export()
        * Benchmarks
        * Conclusion: If you want internal-only serialization, serialize() still wins.
      * What should you serialize?
        * Data objects
        * No service objects
        * Data objects with service object dependency are not data objects.
          * All the ways around this problem suck/involve globals.
      * Custom serialization
        * At TYPO3, fall 2021, wanted to turn massive config arrays into class readonly objects.
        * "Don't solve a problem, build a tool to solve the problem, then use it."
        * Needed flatten/collect, dynamic type map, high performance.
        * Tried Symfony Serializer...  way too convoluted, didn't have flatten/collect or dynamic type map.
        * Time to write one...
      * A trivial deserializer - EnvMapper
      * Crell/Serde - 8.1 before it was even out
        * Entirely attribute driven
        * AttributeUtils
        * Crell/fp - FP tools, used extensively.
        * Goal is to showcase what goes into serialization, and the power of PHP 8.1.
          * Not just showing off.
      * Deep dive - Attribute Utils
        * Incorporate reflection
        * Interface-driven functionality
        * Class-at-a-time
        * Include/exclude/Excludable
        * Inheritance!  Including interfaces!
        * Sub-attributes
        * Cache-friendly
        * Multi-step construction - SA tools, you're wrong about readonly.
        * Scopes (for serialization groups)
      * Deep dive - Serde
        * Constructor default value objects.
        * $propReader/$propWriter, to bypass visibility.
        * Enum as default object instances (renaming)
        * Recursive walk, to support streaming formats
        * Enum error codes
        * Sequence vs Dict
          * Implode
        * Iterables
          * Include example of DB->JSON streaming.
        * TypeMaps
        * Flatten/collect
        * Scopes
      * Notice... everything is immutable. Everything.  It can be done.
      * Showcase: Crell/Config.  What I wanted to build in the first place.
      * TYPO3... ended up not using it.  But yay Free Software, you can!
      * Recap
        * If it's just for internal use, serialize() still wins.
        * Attributes are frickin' awesome, especially with an improved parser (AttributeUtils)
        * PHP 8.x rocks.
        * It's helpful to periodically burn it down and start over... in small pieces.  (Component design!)
        * For the most robust serialization/deserialization, use Serde.
        * For the most easy to use ser/de, use Serde.
        * Hooray Free Software!


    </div>

    <section id="final">
      <div class="layout-1up-2down">
        <div style="grid-area: top; margin-top: 1em;">
          <h2>Larry Garfield</h2>
          <h2><a href="https://phpc.social/@Crell">@Crell@phpc.social</a></h2>
        </div>
        <div style="grid-area: left">
          <h2>All about PHP 8!</h2>
          <p><a href="https://bit.ly/php80">https://bit.ly/php80</a></p>
          <p><a href="https://bit.ly/php80"><img src="assets/exploring-php80.png" width="175px;" alt="Cover of Exploring PHP 8.0" /></a></p>
        </div>
        <div style="grid-area: right">
          <h2>Buy my book!</h2>
          <p><a href="https://bit.ly/fn-php">https://bit.ly/fn-php</a></p>
          <p><a href="https://bit.ly/fn-php"><img src="assets/thinking-functionally.png" width="175px;" alt="Cover of Thinking Functionally in PHP" /></a></p>
        </div>
      </div>
      <h3><a href="https://www.garfieldtech.com/">https://www.garfieldtech.com/</a></h3>
    </section>
  </div>
</div>

<script src="dist/reveal.js"></script>
<script src="plugin/notes/notes.js"></script>
<script src="plugin/markdown/markdown.js"></script>
<script src="plugin/highlight/highlight.js"></script>
<script>
  // More info about initialization & config:
  // - https://revealjs.com/initialization/
  // - https://revealjs.com/config/
  Reveal.initialize({
    hash: true,

    // Learn about plugins: https://revealjs.com/plugins/
    plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
  });
</script>

<!-- Custom Reveal extension scripts. -->
<script src="platform/classer.js"></script>
<script src="platform/countup.js"></script>
<script src="platform/usecase.js"></script>

</body>
</html>
